<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Oscars Predictions</title>
    <meta name="description" content="Make your Oscars picks, track results, and see a local leaderboard.">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&family=Source+Serif+4:wght@600;700&display=swap"
      rel="stylesheet"
    >
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    >
    <link rel="stylesheet" href="css/site.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script defer src="js/app.js"></script>
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to main content</a>
    <header class="site-header">
      <div class="container hero hero-full">
        <div class="hero-text">
          <div class="hero-top">
            <p class="eyebrow">
              <span class="eyebrow-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" focusable="false">
                  <path d="M208.3 64L432.3 64C458.8 64 480.4 85.8 479.4 112.2C479.2 117.5 479 122.8 478.7 128L528.3 128C554.4 128 577.4 149.6 575.4 177.8C567.9 281.5 514.9 338.5 457.4 368.3C441.6 376.5 425.5 382.6 410.2 387.1C390 415.7 369 430.8 352.3 438.9L352.3 512L416.3 512C434 512 448.3 526.3 448.3 544C448.3 561.7 434 576 416.3 576L224.3 576C206.6 576 192.3 561.7 192.3 544C192.3 526.3 206.6 512 224.3 512L288.3 512L288.3 438.9C272.3 431.2 252.4 416.9 233 390.6C214.6 385.8 194.6 378.5 175.1 367.5C121 337.2 72.2 280.1 65.2 177.6C63.3 149.5 86.2 127.9 112.3 127.9L161.9 127.9C161.6 122.7 161.4 117.5 161.2 112.1C160.2 85.6 181.8 63.9 208.3 63.9zM165.5 176L113.1 176C119.3 260.7 158.2 303.1 198.3 325.6C183.9 288.3 172 239.6 165.5 176zM444 320.8C484.5 297 521.1 254.7 527.3 176L475 176C468.8 236.9 457.6 284.2 444 320.8z"/>
                </svg>
              </span>
              <span data-i18n="appName">Oscars Predictions</span>
            </p>
            <div class="language-switch">
              <label for="language-select" class="visually-hidden" data-i18n="languageLabel">Language</label>
              <select id="language-select" aria-label="Language">
                <option value="en">English</option>
                <option value="it">Italiano</option>
              </select>
            </div>
          </div>
          <h1 data-i18n="heroTitle">Predict the Oscars and climb the leaderboard.</h1>
          <p class="lede" data-i18n="heroSubtitle">
            Make your picks, earn points, and see how you stack up once results are in.
            No accounts, no personal details, just a simple and fun game.
          </p>
        </div>
      </div>
    </header>

    <main id="main" class="container stack">
      <noscript>
        <div class="notice" role="status">
          This app needs JavaScript enabled to save picks and calculate scores.
        </div>
      </noscript>

      <section class="how-it-works">
        <div class="section-heading">
          <h2 data-i18n="howItWorksTitle">How it works</h2>
          <p class="muted" data-i18n="howItWorksSubtitle">Three quick steps to join the fun.</p>
        </div>
        <div class="steps-grid">
          <div class="card step-card">
            <h3 data-i18n="step1Title">1. Make picks</h3>
            <p class="muted" data-i18n="step1Text">Select a nominee for every category.</p>
          </div>
          <div class="card step-card">
            <h3 data-i18n="step2Title">2. Score points</h3>
            <p class="muted" data-i18n="step2Text">Correct picks earn points toward your total.</p>
          </div>
          <div class="card step-card">
            <h3 data-i18n="step3Title">3. Track results</h3>
            <p class="muted" data-i18n="step3Text">See the leaderboard update after winners are set.</p>
          </div>
        </div>
        <p class="muted" data-i18n="votingInfo">
          Vote in any categories you want (at least one). Voting closes March 15 at 12:00 GMT.
        </p>
      </section>

      <section aria-labelledby="registration-title" class="card stack hero-card">
        <div id="registration-empty" class="stack">
          <h2 id="registration-title" class="card-title" data-i18n="registrationTitle">Select your username</h2>
          <p class="muted" data-i18n="registrationSubtitle">Pick a username to begin.</p>
          <form id="registration-form" class="stack" novalidate>
            <div class="field">
              <label for="username" data-i18n="usernameLabel">Username</label>
              <input
                id="username"
                name="username"
                type="text"
                autocomplete="nickname"
                inputmode="text"
                minlength="2"
                maxlength="24"
                required
                aria-describedby="username-help"
              >
              <p id="username-help" class="help" data-i18n="usernameHelp">
                2–24 characters, letters and numbers only.
              </p>
            </div>
            <div class="field">
              <label for="pin" data-i18n="pinLabel">PIN</label>
              <input
                id="pin"
                name="pin"
                type="password"
                inputmode="numeric"
                minlength="4"
                maxlength="6"
                required
                aria-describedby="pin-help"
              >
              <p id="pin-help" class="help" data-i18n="pinHelp">
                4–6 digits. You will need this to access your link.
              </p>
            </div>
            <button type="submit" data-i18n="saveUsername">Save username</button>
          </form>
          <p id="username-status" class="status" aria-live="polite" role="status"></p>
        </div>

        <div id="registration-summary" class="stack" hidden>
          <h2 class="card-title">
            <span data-i18n="hiLabel">Hi</span> <strong id="current-user"></strong>
          </h2>
          <p class="muted" data-i18n="usernameActions">Update or add another user.</p>
          <div class="button-row">
            <button type="button" id="edit-username" data-i18n="editUsername">Update your username</button>
            <button type="button" id="add-user" data-i18n="addUser">Add another user</button>
          </div>
          <div class="link-box">
            <p class="muted" data-i18n="personalLinkLabel">Your personal link</p>
            <div class="link-row">
              <input id="personal-link" type="text" readonly aria-label="Personal link">
              <button type="button" id="copy-link" data-i18n="copyLink">Copy link</button>
            </div>
            <p class="help" id="copy-status" aria-live="polite"></p>
          </div>
          <form id="update-username-form" class="stack" novalidate hidden>
            <div class="field">
              <label for="update-username-input" data-i18n="usernameLabel">Username</label>
              <input
                id="update-username-input"
                name="update-username"
                type="text"
                autocomplete="nickname"
                inputmode="text"
                minlength="2"
                maxlength="24"
                required
                aria-describedby="update-username-help"
              >
              <p id="update-username-help" class="help" data-i18n="usernameHelp">
                2–24 characters, letters and numbers only.
              </p>
            </div>
            <div class="field">
              <label for="update-pin-input" data-i18n="pinLabel">PIN</label>
              <input
                id="update-pin-input"
                name="update-pin"
                type="password"
                inputmode="numeric"
                minlength="4"
                maxlength="6"
                required
                aria-describedby="update-pin-help"
              >
              <p id="update-pin-help" class="help" data-i18n="pinHelp">
                4–6 digits. You will need this to access your link.
              </p>
            </div>
            <div class="button-row">
              <button type="submit" data-i18n="saveUsername">Save username</button>
              <button type="button" id="cancel-update" data-i18n="cancel">Cancel</button>
            </div>
          </form>
          <p id="update-status" class="status" aria-live="polite" role="status"></p>
        </div>
      </section>

      <div class="main-grid">
        <div class="stack">
          <section aria-labelledby="picks-title" class="card stack">
            <h2 id="picks-title" data-i18n="picksTitle">Your picks</h2>
            <p class="muted" data-i18n="picksSubtitle">
              Make a selection for each category. You can update your picks any time before results are entered.
            </p>
            <p class="muted" data-i18n="picksDeadline">
              Submit at least one pick. Voting closes March 15 at 12:00 GMT.
            </p>
            <form id="picks-form" class="stack" novalidate>
              <div id="picks-container" class="stack"></div>
              <button type="submit" data-i18n="savePicks">Save picks</button>
            </form>
            <p id="picks-status" class="status" aria-live="polite" role="status"></p>
          </section>

          <section aria-labelledby="results-title" class="card stack">
            <h2 id="results-title" data-i18n="resultsTitle">Results</h2>
            <p class="muted" data-i18n="resultsSubtitle">
              Winners are fetched automatically when the Oscars site updates.
            </p>
            <p id="results-status" class="status" aria-live="polite" role="status"></p>
          </section>
        </div>

        <div class="stack">
          <section aria-labelledby="leaderboard-title" class="card stack">
            <h2 id="leaderboard-title" data-i18n="leaderboardTitle">Leaderboard</h2>
            <div class="table-wrap">
              <table class="leaderboard">
                <caption class="visually-hidden" data-i18n="leaderboardCaption">Leaderboard with total points</caption>
                <thead>
                  <tr>
                    <th scope="col" data-i18n="leaderboardRank">Rank</th>
                    <th scope="col" data-i18n="leaderboardUsername">Username</th>
                    <th scope="col" data-i18n="leaderboardVotes">Voted</th>
                    <th scope="col" data-i18n="leaderboardPoints">Points</th>
                    <th scope="col" data-i18n="leaderboardCorrect">Correct</th>
                  </tr>
                </thead>
                <tbody id="leaderboard-body">
                  <tr>
                    <td colspan="5" data-i18n="leaderboardEmpty">No results yet.</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p id="leaderboard-status" class="status" aria-live="polite" role="status"></p>
          </section>

          <section aria-labelledby="data-title" class="card stack">
            <h2 id="data-title" data-i18n="dataTitle">Data tools</h2>
            <p class="muted" data-i18n="dataSubtitle">
              Export or import your local data. Use this to move picks between devices.
            </p>
            <div class="button-row">
              <button type="button" id="export-data" data-i18n="exportData">Export data</button>
              <label class="file-button" for="import-data">
                <span data-i18n="importData">Import data</span>
              </label>
              <input id="import-data" class="visually-hidden" type="file" accept="application/json">
              <button type="button" class="danger" id="clear-data" data-i18n="clearData">Clear all data</button>
            </div>
            <p id="data-status" class="status" aria-live="polite" role="status"></p>
          </section>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p class="muted" data-i18n="footerNote">
          Built for fun. No personal info required and nothing is stored on a server.
        </p>
      </div>
    </footer>
  </body>
</html>
